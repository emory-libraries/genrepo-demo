.. _DEPLOYNOTES:

DEPLOYNOTES
===========

Installation
------------

Instructions to install required software and systems, configure the application,
and run various scripts to load initial data.

Software Dependencies
~~~~~~~~~~~~~~~~~~~~~

We recommend the use of `pip <http://pip.openplans.org/>`_ and `virtualenv
<http://virtualenv.openplans.org/>`_ for environment and dependency
management in this and other Python projects. If you don't have them
installed, you can get them with ``sudo easy_install pip`` and then ``sudo pip install
virtualenv``.

Setup the environment
~~~~~~~~~~~~~~~~~~~~~

When first installing this project, it is recommended to create a virtual environment
for it.  The virtualenv environment is a directory that can be installed anywhere you like,
perhaps adjacent to wherever the source code is deployed. To create your new environment,
simply run the virtualenv command::

  $ virtualenv --no-site-packages /home/genrepo/env

.. Note::
  For Apache/WSGI installations, you should run this command as the apache user.

Source the activation file to invoke your new virtual environment (this requires that you
use the bash shell)::

  $ . /home/genrepo/env/bin/activate

Once the environment has been activated inside a shell, Python programs
spawned from that shell will read their environment only from this
directory, not from the system-wide site packages. Installations will
correspondingly be installed into this environment.

.. Note::
  Installation instructions and upgrade notes below assume that
  you are already in an activated shell.

Install python dependencies
^^^^^^^^^^^^^^^^^^^^^^^^^^^

FindingAids depends on several python libraries. If you are using pip, you can
install all of the dependencies in an automated fashion that will print status
messages as packages are installed. If there are any errors, pip should display
messages indicating the problem.

To install python dependencies, cd into the repository checkout and::

  $ pip install -r pip-dependencies

FindingAids requires a SQL database, but the type does not matter,
so this is not included in the pip-dependencies file.  You may want to
pip install  ``MySQL-python`` or ``psycopg``, depending on the database you
plan to use.

If you are a developer or are installing to a continuous ingration server
where you plan to run unit tests, code coverage reports, or build sphinx
documentation, you probably will also want to::

  $ pip install -r build-dependencies

Known Issues
""""""""""""

* As of 04/2011, installing **python-eulcore** from SVN via pip does not
  install the eulcore template themes correctly.  The easiest way to fix
  this is to manually create a symbolic link from the root of your
  virtualenv to the python-eulcore theme directory::

    $ cd /home/genrepo/env
    $ ln -s src/python-eulcore/themes/

-----
